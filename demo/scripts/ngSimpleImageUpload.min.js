/*! ng Simple Image Upload - v1.0.0 - 2016-05-05
* Copyright (c) 2016 ; Licensed  */
!function(){"use strict";var a=angular.module("simpleImageUpload",[]);a.directive("ngSimpleImageUpload",["$timeout","$document",function(a,b){return{restrict:"E",replace:!1,templateUrl:"/src/templates/imageupload.html",scope:{onPhotosSelectedForUpload:"&"},link:function(c,d,e){function f(){c.showImageUploadArea=!1,b.unbind("click",documentClick),c.$apply()}function g(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];0===e.type.indexOf("image")&&b.push(e)}b.length>0&&(c.onPhotosSelectedForUpload()(b),c.showImageUploadArea=!1)}c.showImageUploadArea=!1;var h=d.find("#imageUploadDragDropArea"),i=d.find("#imageUploadButton"),j=d.find("#imageUploadFileInput");c.displayImageUploadArea=function(a){c.showImageUploadArea=!c.showImageUploadArea,c.showImageUploadArea},h.on("dragenter",function(a){a.stopPropagation(),a.preventDefault()}),h.on("dragover",function(a){a.stopPropagation(),a.preventDefault()}),h.on("drop",function(a){if(a.stopPropagation(),a.preventDefault(),a.originalEvent&&a.originalEvent.dataTransfer){var b=a.originalEvent.dataTransfer,c=b.files;g(c)}}),i.on("click",function(b){a(function(){j&&j[0]&&j[0].click()},0)}),j.on("change",function(){g(j[0].files)}),d.on("keyup",function(a){console.log(a.which),27===a.which&&c.showImageUploadArea&&f()}),c.$on("$destroy",function(){b.unbind("click",documentClick),h.off("dragenter"),h.off("dragover"),h.off("drop"),i.off("click"),j.off("change"),d.off("keyup")}),c.dragDropAreaClick=function(a){var b=a.target;"imageUploadIcon"!==b.id&&"imageUploadButton"!==b.id&&"imageUploadFileInput"!==b.id&&c.showImageUploadArea&&(a.stopPropagation(),a.preventDefault())}}}}])}(),angular.module("simpleImageUpload").run(["$templateCache",function(a){"use strict";a.put("src/templates/imageUpload.html",'<a id="imageUploadIcon" href="#" class="tools" ng-click="displayImageUploadArea($event)" title="Upload media"><span class="glyphicon glyphicon-upload"></span></a><div id="imageUpload" class="panel drag-drop-container" ng-show="showImageUploadArea" ng-click="dragDropAreaClick($event)"><div id="imageUploadDragDropArea" class="drag-drop-area"><span class="glyphicon glyphicon-upload ico-upload"></span><h3>Drop files here to upload<br>or</h3><input id="imageUploadButton" type="button" class="btn btn-primary" value="Select Files"> <input id="imageUploadFileInput" type="file" style="display:none" multiple accept="image/*"></div></div>')}]);